<div [class.flex]="!fullWidth" [class.flex-full]="fullWidth">
  <div
    *ngIf="inputGroup === 'prepend' || inputGroup === 'prepend-append'"
    class="{{
      'container-text-prepend-' + size + ' ' + 'text-append-prepend-' + size
    }}"
  >
    <span>{{ textPrepend }}</span>
  </div>

  <div class="custom-select">
    <fui-icons
      *ngIf="search"
      class="{{ size }}"
      [ngClass]="{
        'fui-icon-search': search && (inputGroup === 'append' || inputGroup === 'none'),
        'fui-icon-search-prepend': search && (inputGroup === 'prepend' || inputGroup === 'prepend-append'),
      }"
      [icon]="'search'"
      [size]="size === 's' ? 'sizes' : size === 'm' ? 'sizem' : 'sizel'"
      [color]="'text'"
    ></fui-icons>
    <input
      *ngIf="typeField === 'text'"
      [formControl]="textFieldControl"
      [ngClass]="{
        'pl-35': search,
        'pl-10 pr-10': !search,
        'pr-100': loading && validator,
        'fui-text-field-invalid-s': validator && size == 's',
        'fui-text-field-s': !validator && size == 's',
        'fui-text-field-invalid-m': validator && size == 'm',
        'fui-text-field-m': !validator && size == 'm',
        'fui-text-field-invalid-l': validator && size == 'l',
        'fui-text-field-l': !validator && size == 'l',
        'full-width': fullWidth
      }"
      class="{{
        inputGroup === 'append' ||
        inputGroup === 'prepend' ||
        inputGroup === 'none'
          ? 'border-' + inputGroup
          : 'border-append-prepend'
      }}"
      type="text"
      [readOnly]="readOnly"
      [value]="value"
      [placeholder]="placeholder"
    />
    <select
      id="my-select"
      *ngIf="typeField === 'select'"
      [formControl]="textFieldControl"
      [ngClass]="{
        'pr-70': loading || validator,
        'pl-35': search,
        'pl-10 pr-10': !search,
        'pr-100': loading && validator,
        'fui-text-field-invalid-s': validator && size == 's',
        'fui-text-field-s': !validator && size == 's',
        'fui-text-field-invalid-m': validator && size == 'm',
        'fui-text-field-m': !validator && size == 'm',
        'fui-text-field-invalid-l': validator && size == 'l',
        'fui-text-field-l': !validator && size == 'l',
        'full-width': fullWidth
      }"
      class="{{
        inputGroup === 'append' ||
        inputGroup === 'prepend' ||
        inputGroup === 'none'
          ? 'border-' + inputGroup
          : 'border-append-prepend'
      }}"
    >
      <option value="" selected hidden>{{ placeholder }}</option>
      <option *ngFor="let option of selectOptions" [value]="option.value">
        {{ option.label }}
      </option>
    </select>
    <div class="arrow" *ngIf="typeField === 'select'"></div>
  </div>

  <div
    class="{{
      inputGroup === 'append' ||
      inputGroup === 'prepend' ||
      inputGroup === 'none'
        ? 'fui-icon-input-' + inputGroup + '-' + size
        : 'fui-icon-input-append-prepend-' + size
    }}"
  >
    <div
      [ngClass]="{
        'fui-icon-util': typeField === 'select'
      }"
    >
      <fui-loading
        *ngIf="loading"
        [type]="'spinner'"
        class="fui-icon-mx"
        [isLoading]="true"
        [size]="'sizel'"
      ></fui-loading>
      <fui-icons
        *ngIf="validator"
        class="fui-icon-mx"
        [icon]="'alert'"
        [size]="'sizel'"
        [color]="'danger'"
      ></fui-icons>
    </div>
  </div>
  <div
    *ngIf="inputGroup === 'append' || inputGroup === 'prepend-append'"
    class="{{
      'container-text-append-' + size + ' ' + 'text-append-prepend-' + size
    }}"
  >
    <span class="h-full">{{ textAppend }}</span>
  </div>
</div>
<span class="msg-validation" *ngIf="validator">{{ message }}</span>
