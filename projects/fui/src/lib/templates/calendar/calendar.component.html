<!-- HEADER CALENDAR  -->
<div class="flex-between">
  <fui-popover [position]="'bottom'" [align]="'start'">
    <div class="toggle-select">
      <div class="label-calendar">
        <fui-text [size]="'l'" [weight]="'semibold'" [color]="themeColor">{{
          selectedMonth.value
        }}</fui-text>
        <fui-text [size]="'s'">{{ selectedYear.value }}</fui-text>
      </div>
      <fui-icons [icon]="'arrowDown'" [size]="'s'" />
    </div>
    <div popover-body class="flex-max">
      <fui-form-control-layout>
        <fui-select-field
          [size]="'s'"
          [placeholder]="'Select month'"
          [formControlField]="selectedMonth"
          [invalid]="false"
          [selectOptions]="monthOption"
        />
      </fui-form-control-layout>
      <fui-form-control-layout>
        <fui-select-field
          [size]="'s'"
          [placeholder]="'Select year'"
          [formControlField]="selectedYear"
          [invalid]="false"
          [selectOptions]="yearOption"
        />
      </fui-form-control-layout>
      <fui-button-icon
        [type]="'button'"
        [fullWidth]="'fit'"
        [option]="'text'"
        [size]="'s'"
        [color]="themeColor"
        [text]="'Apply'"
        (onClick)="updateDaysInMonth()"
      />
    </div>
  </fui-popover>
  <div class="flex">
    <fui-button-icon
      [type]="'button'"
      [color]="themeColor"
      [fullWidth]="'fit'"
      [size]="'s'"
      [option]="'icon'"
      [icon]="'arrowLeft'"
      (onClick)="onPrevMonth()"
    />
    <fui-button-icon
      [type]="'button'"
      [color]="themeColor"
      [fullWidth]="'fit'"
      [size]="'s'"
      [option]="'icon'"
      [icon]="'arrowRight'"
      (onClick)="onNextMonth()"
    />
  </div>
</div>
<!-- HEADER CALENDAR  -->
<div class="grid-calendar">
  <div class="dayofweek {{ themeColor }}" *ngFor="let week of weekdays">
    <fui-text [weight]="'semibold'" [color]="themeColor">
      {{ week }}
    </fui-text>
  </div>
</div>

<div class="grid-calendar">
  @for (item of weeks[0]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>

<div class="grid-calendar">
  @for (item of weeks[1]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>

<div class="grid-calendar">
  @for (item of weeks[2]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>

<div class="grid-calendar">
  @for (item of weeks[3]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>
<div class="grid-calendar">
  @for (item of weeks[4]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>

@if (weeks.length > 4) {
<div class="grid-calendar">
  @for (item of weeks[5]; track $index) {
  <div class="dayofweek">
    <fui-text
      [weight]="
        item.date === nowDate && item.month === nowMonth ? 'bold' : 'regular'
      "
      [color]="item.month === selectedMonth.value ? themeColor : 'disabled'"
    >
      {{ item.date }}
    </fui-text>
  </div>
  }
</div>
}
